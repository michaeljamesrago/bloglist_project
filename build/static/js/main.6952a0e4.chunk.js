(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(16),c=n.n(a),o=n(3),s=n.n(o),u=n(5),l=n(4),i=(n(22),n(0)),j=function(e){var t=e.blog,n=t.user?t.user.name:"No user recorded";return Object(i.jsxs)("div",{className:"blog",children:[Object(i.jsxs)("p",{children:["Title: ",t.title]}),Object(i.jsxs)("p",{children:["Author: ",t.author]}),Object(i.jsxs)("p",{children:["Likes: ",t.likes]}),Object(i.jsxs)("p",{children:["User: ",n]})]})},b=n(6),p=n.n(b),g="/api/blogs",h=null,O={getAll:function(){return p.a.get(g).then((function(e){return e.data}))},create:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,p.a.post(g,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){h="bearer ".concat(e)}},f={login:function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(l.a)(c,2),b=o[0],p=o[1],g=Object(r.useState)(null),h=Object(l.a)(g,2),d=h[0],v=h[1],x=Object(r.useState)([]),m=Object(l.a)(x,2),w=m[0],k=m[1],S=Object(r.useState)(""),y=Object(l.a)(S,2),T=y[0],A=y[1],I=Object(r.useState)(""),L=Object(l.a)(I,2),C=L[0],E=L[1],U=Object(r.useState)(""),B=Object(l.a)(U,2),J=B[0],N=B[1],D=Object(r.useState)(0),R=Object(l.a)(D,2),z=R[0],G=R[1];Object(r.useEffect)((function(){O.getAll().then((function(e){console.log("BLOGS RETRIEVED: ",e),k(e)}))}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedInBlogAppUser");if(e){var t=JSON.parse(e);v(t),O.setToken(t.token)}}),[]);var P=function(){var e=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("Logging in with ".concat(n)),e.prev=2,e.next=5,f.login({username:n,password:b});case 5:r=e.sent,window.localStorage.setItem("loggedInBlogAppUser",JSON.stringify(r)),O.setToken(r.token),v(r),a(""),p(""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),console.log("There was an exception");case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.create({title:T,author:C,url:J,likes:z});case 4:n=e.sent,k(w.concat(n)),A(""),E(""),N(""),G(0),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),console.log("There was an exception");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return null===d?Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Log in to application"}),Object(i.jsxs)("form",{onSubmit:P,children:[Object(i.jsxs)("p",{children:["Username: ",Object(i.jsx)("input",{value:n,onChange:function(e){console.log(e.target.value),a(e.target.value)}})]}),Object(i.jsxs)("p",{children:["Password: ",Object(i.jsx)("input",{value:b,onChange:function(e){console.log(e.target.value),p(e.target.value)}})]}),Object(i.jsx)("button",{type:"submit",children:"Log In"})]})]}):Object(i.jsxs)("div",{children:[Object(i.jsxs)("p",{children:[d.name," is logged in"]}),Object(i.jsxs)("form",{onSubmit:V,children:[Object(i.jsxs)("p",{children:["Title: ",Object(i.jsx)("input",{type:"text",name:"title",value:T,onChange:function(e){console.log(e.target.value),A(e.target.value)}})]}),Object(i.jsxs)("p",{children:["Author: ",Object(i.jsx)("input",{type:"text",name:"author",value:C,onChange:function(e){console.log(e.target.value),E(e.target.value)}})]}),Object(i.jsxs)("p",{children:["URL: ",Object(i.jsx)("input",{type:"text",name:"url",value:J,onChange:function(e){console.log(e.target.value),N(e.target.value)}})]}),Object(i.jsxs)("p",{children:["Likes: ",Object(i.jsx)("input",{type:"number",min:"0",name:"likes",value:z,onChange:function(e){console.log(e.target.value),G(e.target.value)}})]}),Object(i.jsx)("button",{type:"submit",children:"Submit"})]}),Object(i.jsx)("h2",{children:"blogs"}),w.map((function(e){return Object(i.jsx)(j,{blog:e},e.id)}))]})};c.a.render(Object(i.jsx)(d,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.6952a0e4.chunk.js.map